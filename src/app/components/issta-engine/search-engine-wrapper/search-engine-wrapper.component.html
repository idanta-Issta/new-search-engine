<div class="search-engine">
  <app-lead-form-extra-rooms *ngIf="leadFormOpen$ | async" (closed)="closeLeadForm()"></app-lead-form-extra-rooms>
  <app-validation-modal *ngIf="validationModalOpen$ | async" (closed)="closeValidationModal()"></app-validation-modal>
  <div class="tabs" *ngIf="options?.showTabs">
    <a
      *ngFor="let tab of options?.tabs"
      class="tab"
      [href]="tab.url || null"
      [target]="tab.url ? '_blank' : null"
      (click)="onTabClick(tab, $event)"
      [class.active]="tab === activeTab"
    >
      <img *ngIf="tab.imagePath" [src]="tab.imagePath" [alt]="tab.title" />
      <i *ngIf="!tab.imagePath && tab.icon" [class]="tab.icon"></i>
      <span>{{ tab.title }}</span>
    </a>
  </div>

 <div class="tab-content" [class.animating]="isAnimating">
    <!-- External HTML content -->
    <div *ngIf="hasExternalHtml()" class="external-html-container">
      <div *ngIf="isLoadingHtml" class="loading-spinner">
        <span>טוען תוכן...</span>
      </div>
      <div #dynamicContainer id="dynamic-container" [style.display]="isLoadingHtml ? 'none' : 'block'"></div>
    </div>

    <!-- Built-in engines -->
    <app-flights
      *ngIf="!hasExternalHtml() && getActiveType() === ETypeSearchEngine.FLIGHTS"
    ></app-flights>

    <app-hotel-abroad
      *ngIf="!hasExternalHtml() && getActiveType() === ETypeSearchEngine.HOTELS_ABROAD"
    ></app-hotel-abroad>

    <app-domestic-vacation
      *ngIf="!hasExternalHtml() && getActiveType() === ETypeSearchEngine.DOMESTIC_VACATIONS"
    ></app-domestic-vacation>

    <app-sport
      *ngIf="!hasExternalHtml() && getActiveType() === ETypeSearchEngine.SPORT"
    ></app-sport>

    <app-organized-tours
      *ngIf="!hasExternalHtml() && getActiveType() === ETypeSearchEngine.ORGANIZED_TOURS"
    ></app-organized-tours>

    <app-dynamic-packages
      *ngIf="!hasExternalHtml() && getActiveType() === ETypeSearchEngine.DYNAMIC_PACKAGES"
    ></app-dynamic-packages>

    <app-ski
      *ngIf="!hasExternalHtml() && getActiveType() === ETypeSearchEngine.SKI"
    ></app-ski>

    <app-village-resorts
      *ngIf="!hasExternalHtml() && getActiveType() === ETypeSearchEngine.VILLAGE_RESORTS"
    ></app-village-resorts>

    <app-car
      *ngIf="!hasExternalHtml() && getActiveType() === ETypeSearchEngine.CAR_RENTAL"
    ></app-car>
  </div>
</div>
